<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Concept reading exercise | The Essence of Software</title>
<meta name="keywords" content="">
<meta name="description" content="Learning about concept design by reading a concept spec">
<meta name="author" content="Daniel Jackson">
<link rel="canonical" href="https://essenceofsoftware.com/exercises/concept-reading/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.7307e9fa3987a55c6ee0d7471f5e70e27b04d0fd39b50b37bfa14e5029a362ea.css" integrity="sha256-cwfp&#43;jmHpVxu4NdHH15w4nsE0P05tQs3v6FOUCmjYuo=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://essenceofsoftware.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://essenceofsoftware.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://essenceofsoftware.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://essenceofsoftware.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://essenceofsoftware.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://essenceofsoftware.com/exercises/concept-reading/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WRQ6HWW3ZW"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WRQ6HWW3ZW');
        }
      </script><meta property="og:url" content="https://essenceofsoftware.com/exercises/concept-reading/">
  <meta property="og:site_name" content="The Essence of Software">
  <meta property="og:title" content="Concept reading exercise">
  <meta property="og:description" content="Learning about concept design by reading a concept spec">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="exercises">
    <meta property="article:published_time" content="2025-07-24T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-07-24T00:00:00+00:00">
      <meta property="og:image" content="https://essenceofsoftware.com/eos-twitter-card.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://essenceofsoftware.com/eos-twitter-card.png">
<meta name="twitter:title" content="Concept reading exercise">
<meta name="twitter:description" content="Learning about concept design by reading a concept spec">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Exercises",
      "item": "https://essenceofsoftware.com/exercises/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Concept reading exercise",
      "item": "https://essenceofsoftware.com/exercises/concept-reading/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Concept reading exercise",
  "name": "Concept reading exercise",
  "description": "Learning about concept design by reading a concept spec",
  "keywords": [
    
  ],
  "articleBody": "To help you get going with designing individual concepts, this exercise asks you to read a mostly complete concept and answer some questions about it.\nconcept GiftRegistry [User, Item]\npurpose track purchases of requested gifts\nprinciple a recipient creates a registry, and adds items to it indicating the number of each requested; opens the registry so it becomes publicly visible; then givers can view which items are still available and purchase them; and finally the recipient closes the registry, after which it is no longer publicly visible but the recipient can see which items were purchased and by whom.\nstate a set of Registrys with an owner User an active Flag a set of Requests a set of Requests with an Item a count Number a set of Purchases a set of Purchases with a purchaser User an Item a count Number\nactions create (owner: User): (registry: Registry) create a new registry with this owner, active set to false and no requests addItem (registry: Registry, item: Item, count: Number) requires registry exists effects if a request for this item exists, add the count otherwise create a new request for the item with this count and add to registry removeItem (registry: Registry, item: Item) requires a request for this item exists in the registry effects remove the request from the registry open (registry: Registry) requires registry exists and it is not active effects make registry active close (registry: Registry) requires registry exists and it is active effects make registry not active purchase (purchaser: User, registry: Registry, item: Item, count: Number) requires registry exists, is active and has a request for this item with at least count effects create a new purchase for this purchaser, item and count and decrement the count in the matching request\nQuestions Invariants. What are two invariants (aka integrity constraints) of the state? What are their purposes? Is one more important than the other? Which actions are primarily responsible for preserving each of the invariants, and how do they do it? Fixing an action. Can you identify an action that potentially breaks one of these invariants, and explain how this might happen? Can you suggest two different ways in which it might be fixed, and give some reasons in favor and against each (pointing to how they might affect users)? Inferring behavior. The operational principle describes the typical scenario in which the registry is opened and eventually closed. But a concept specification often allows other scenarios. By reading the specs of the concept actions, determine whether a registry can be opened and closed repeatedly. What might be some reasons to allow this? Registry deletion. There is no action to delete a registry. Why in practice is this probably a good design decision? Queries. What are some common queries that you would expect to be executed against the concept state? Hiding purchases. A common feature of gift registries is to allow the recipient to choose not to see purchases so that an element of surprise is retained. How would you augment the concept specification to support this? Generic types. The User and Item types are specified as generic parameters. The Item type might be populated by SKU codes, for example. Explain why this is preferable to representing items with their names, descriptions, prices, etc. Assigning functionality. For each of these possible extensions, say whether supporting it should involve changes to this concept, synchronization with other concepts (which you should name) or both: Showing most recently purchased items Including gift messages from givers Grouping requests by category (kitchen, bath, etc) Notifying recipients when a purchase is made Incorporating requests for money rather than items Allowing givers to join together in purchasing an item ",
  "wordCount" : "614",
  "inLanguage": "en",
  "image": "https://essenceofsoftware.com/eos-twitter-card.png","datePublished": "2025-07-24T00:00:00Z",
  "dateModified": "2025-07-24T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Daniel Jackson"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://essenceofsoftware.com/exercises/concept-reading/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "The Essence of Software",
    "logo": {
      "@type": "ImageObject",
      "url": "https://essenceofsoftware.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://essenceofsoftware.com/" accesskey="h" title="The Essence of Software (Alt + H)">The Essence of Software</a>
            <div class="logo-switches">
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://essenceofsoftware.com/ask/" title="FAQ">
                    <span>FAQ</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/buy/" title="Buy">
                    <span>Buy</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/reviews/" title="Reviews">
                    <span>Reviews</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/author/" title="Author">
                    <span>Author</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/tutorials/" title="Tutorials">
                    <span>Tutorials</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/studies/" title="Case Studies">
                    <span>Case Studies</span>
                </a>
            </li>
            <li>
                <a href="https://essenceofsoftware.com/subscribe/" title="Subscribe">
                    <span>Subscribe</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Concept reading exercise
    </h1>
    <div class="post-description">
      Learning about concept design by reading a concept spec
    </div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#questions" aria-label="Questions">Questions</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>To help you get going with designing individual concepts, this exercise asks you to read a mostly complete concept and answer some questions about it.</p>
<p><strong>concept</strong> GiftRegistry [User, Item]</p>
<p><strong>purpose</strong> track purchases of requested gifts</p>
<p><strong>principle</strong>
a recipient creates a registry, and adds items to it indicating the number of each requested; opens the registry so it becomes publicly visible; then givers can view which items are still available and purchase them; and finally the recipient closes the registry, after which it is no longer publicly visible but the recipient can see which items were purchased and by whom.</p>
<p><strong>state</strong>
a set of Registrys with
an owner User
an active Flag
a set of Requests
a set of Requests with
an Item
a count Number
a set of Purchases
a set of Purchases with
a purchaser User
an Item
a count Number</p>
<p><strong>actions</strong>
create (owner: User): (registry: Registry)
create a new registry with this owner, active set to false and no requests
addItem (registry: Registry, item: Item, count: Number)
requires registry exists
effects if a request for this item exists, add the count
otherwise create a new request for the item with this count and add to registry
removeItem (registry: Registry, item: Item)
requires a request for this item exists in the registry
effects remove the request from the registry
open (registry: Registry)
requires registry exists and it is not active
effects make registry active
close (registry: Registry)
requires registry exists and it is active
effects make registry not active
purchase (purchaser: User, registry: Registry, item: Item, count: Number)
requires registry exists, is active and has a request for this item with at least count
effects create a new purchase for this purchaser, item and count and decrement the count in the matching request</p>
<h2 id="questions">Questions<a hidden class="anchor" aria-hidden="true" href="#questions">#</a></h2>
<ul>
<li><strong>Invariants</strong>. What are two invariants (aka integrity constraints) of the state? What are their purposes? Is one more important than the other? Which actions are primarily responsible for preserving each of the invariants, and how do they do it?</li>
<li><strong>Fixing an action</strong>. Can you identify an action that potentially breaks one of these invariants, and explain how this might happen? Can you suggest two different ways in which it might be fixed, and give some reasons in favor and against each (pointing to how they might affect users)?</li>
<li><strong>Inferring behavior</strong>. The operational principle describes the typical scenario in which the registry is opened and eventually closed. But a concept specification often allows other scenarios. By reading the specs of the concept actions, determine whether a registry can be opened and closed repeatedly. What might be some reasons to allow this?</li>
<li><strong>Registry deletion</strong>. There is no action to delete a registry. Why in practice is this probably a good design decision?</li>
<li><strong>Queries</strong>. What are some common queries that you would expect to be executed against the concept state?</li>
<li><strong>Hiding purchases</strong>. A common feature of gift registries is to allow the recipient to choose not to see purchases so that an element of surprise is retained. How would you augment the concept specification to support this?</li>
<li><strong>Generic types</strong>. The User and Item types are specified as generic parameters. The Item type might be populated by SKU codes, for example. Explain why this is preferable to representing items with their names, descriptions, prices, etc.</li>
<li><strong>Assigning functionality</strong>. For each of these possible extensions, say whether supporting it should involve changes to this concept, synchronization with other concepts (which you should name) or both:
<ul>
<li>Showing most recently purchased items</li>
<li>Including gift messages from givers</li>
<li>Grouping requests by category (kitchen, bath, etc)</li>
<li>Notifying recipients when a purchase is made</li>
<li>Incorporating requests for money rather than items</li>
<li>Allowing givers to join together in purchasing an item</li>
</ul>
</li>
</ul>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

  </footer>
</article>
    </main>
    
<footer class="footer">


    <span>&copy; 2025 <a href="https://essenceofsoftware.com/">Daniel Jackson</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
